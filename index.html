<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nh·∫≠p Li·ªáu Gh√©p Xe</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: url('https://otodien.vn/wp-content/uploads/2024/08/hinh-anh-xe-vinfast-vf5-plus-1536x779.webp') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            color: #333;
}
h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #003366;
            font-size: 22px;
        }
        .form-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 50px;
            margin-bottom: 15px;
        }
        .form-item {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: 500;
            margin-bottom: 5px;
            color: #003366;
        }
        input, select {
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
            width: 100%;
            background: rgba(255, 255, 255, 0.7);
        }
        .btn-submit {
            width: 100%;
            padding: 14px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            background: #003366;
            color: whitesmoke;
            border: none;
            transition: 0.3s;
            margin-top: 15px;
        }
        .btn-submit:hover {
            background: #00509E;
            color: #fff;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
    padding: 10px;
    text-align: center;
    background-color: #ffffff;
    border: 1px solid #ccc;
}
th {
    background-color: #003366; /* M√†u n·ªÅn xanh ƒë·∫≠m */
    color: white; /* M√†u ch·ªØ tr·∫Øng */
    font-weight: bold; /* ƒê·∫≠m ch·ªØ */
    text-transform: uppercase; /* Chuy·ªÉn t·∫•t c·∫£ ch·ªØ th√†nh ch·ªØ hoa */
    padding: 12px; /* TƒÉng kho·∫£ng c√°ch padding cho c√°c √¥ ti√™u ƒë·ªÅ */
    font-size: 16px; /* TƒÉng k√≠ch th∆∞·ªõc ch·ªØ cho r√µ r√†ng h∆°n */
    border: 1px solid #ddd; /* ƒê∆∞·ªùng vi·ªÅn m·∫£nh ƒë·ªÉ t√°ch c√°c √¥ */
    border-bottom: 3px solid #fff; /* ƒê∆∞·ªùng vi·ªÅn d√†y ph√≠a d∆∞·ªõi ƒë·ªÉ l√†m n·ªïi b·∫≠t ti√™u ƒë·ªÅ */
}

td {
    padding: 12px; /* Th√™m padding cho c√°c √¥ d·ªØ li·ªáu */
    border: 1px solid #ddd; /* ƒê∆∞·ªùng vi·ªÅn nh·∫π cho c√°c √¥ */
}

table {
    border-collapse: collapse;
    width: 100%;
        }
        .container {
            width: 100%;
            max-width: 900px;
            background: rgba(255, 255, 255, 0.55);
            padding: 50px;
            border-radius: 15px;
            box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.3);
        }
        .logo {
            width: 100px;
            display: block;
            margin: 0 auto 10px;
        }
        h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #003366;
            font-size: 22px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.2);
        }
        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: linear-gradient(45deg, #003366, #00509E);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 16px;
        }
        tr:nth-child(even) {
            background-color: rgba(0, 51, 102, 0.05);
        }
        tr:hover {
            background-color: rgba(0, 80, 158, 0.1);
            transition: background 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://brasol.vn/wp-content/uploads/2022/09/logo-vinfast-png.png" class="logo" alt="VinFast Logo">
        <h2>TAÃ£O Y√äU C√ÇÃÄU GHEÃÅP XE</h2>
        <form id="ghex-form" onsubmit="submitForm(event)">
            <div class="form-group">
                <div class="form-item">
                    <label>üìå T∆∞ V·∫•n BH</label>
                    <select name="ten_ban_hang" required>
                        <option value="">Ch·ªçn T∆∞ V·∫•n BH</option>
                        <option value="Nguy·ªÖn VƒÉn A">Nguy·ªÖn VƒÉn A</option>
                        <option value="Tr·∫ßn VƒÉn B">Tr·∫ßn VƒÉn B</option>
                    </select>
                </div>
                <div class="form-item">
                    <label>üë§ T√™n Kh√°ch H√†ng</label>
                    <input type="text" name="ten_khach_hang" required>
                </div>
            </div>
            <div class="form-group">
                <div class="form-item">
                    <label>üöó D√≤ng Xe</label>
                    <select name="dong_xe" required>
                        <option value="">Ch·ªçn D√≤ng Xe</option>
                        <option value="VinFast VF8">VinFast VF8</option>
                        <option value="VinFast VF9">VinFast VF9</option>
                    </select>
                </div>
                <div class="form-item">
                    <label>üè∑Ô∏è Phi√™n B·∫£n</label>
                    <input type="text" name="phien_ban" required>
                </div>
            </div>
            <div class="form-group">
                <div class="form-item">
                    <label>üé® Ngo·∫°i Th·∫•t</label>
                    <input type="text" name="ngoai_that" required>
                </div>
                <div class="form-item">
                    <label>üõãÔ∏è N·ªôi Th·∫•t</label>
                    <input type="text" name="noi_that" required>
                </div>
            </div>
            <div class="form-group">
                <div class="form-item">
                    <label>üìå S·ªë ƒê∆°n H√†ng</label>
                    <input type="text" name="so_don_hang" required>
                </div>
                <div class="form-item">
                    <label>üìÖ Th·ªùi Gian C·ªçc</label>
                    <input type="datetime-local" name="ngay_coc" required>
                </div>
            </div>
            <div class="form-group">
                <div class="form-item">
                    <label>üí∞ T√¨nh Tr·∫°ng Thanh To√°n</label>
                    <select name="tinh_trang_thanh_toan" required>
                        <option value="Ch∆∞a thanh to√°n">Ch∆∞a thanh to√°n</option>
                        <option value="ƒê√£ thanh to√°n">ƒê√£ thanh to√°n</option>
                        <option value="ƒê·∫∑t c·ªçc">ƒê·∫∑t c·ªçc</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn-submit">Th√™m ƒê∆°n H√†ng</button>
        </form>
    </div>
<div class="container">
    <h2>üìã DANH S√ÅCH Y√äU C·∫¶U GHEÃÅP XE</h2>
    <table border="1">
        <thead>
                <tr>
                    <th>T∆∞ V·∫•n BH</th>
                    <th>T√™n Kh√°ch H√†ng</th>
                    <th>D√≤ng Xe</th>
                    <th>Phi√™n B·∫£n</th>
                    <th>Ngo·∫°i Th·∫•t</th>
                    <th>N·ªôi Th·∫•t</th>
                    <th>S·ªë ƒê∆°n H√†ng</th>
                    <th>Th·ªùi Gian C·ªçc</th>
                    <th>T√¨nh Tr·∫°ng Thanh To√°n</th>
                    <th>Th·ªùi Gian Nh·∫≠p Li·ªáu</th>
                </tr>
            </thead>
            <tbody id="order-list"></tbody>
        </table>
</div>
    </div>
<!-- Th√™m th√¥ng b√°o n·ªïi -->
<div id="toast" class="toast">‚úÖ ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c th√™m th√†nh c√¥ng!</div>

<style>
/* Toast notification */
.toast {
    visibility: hidden;
    min-width: 250px;
    background-color: rgba(0, 51, 102, 0.9);
    color: white;
    text-align: center;
    border-radius: 8px;
    padding: 12px;
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 16px;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out;
}

.toast.show {
    visibility: visible;
    opacity: 1;
    bottom: 50px;
}

</style>

<script>

// Hi·ªÉn th·ªã th√¥ng b√°o nh·∫π nh√†ng
function showToast(message) {
    const toast = document.getElementById("toast");
    toast.textContent = message;
    toast.classList.add("show");

    setTimeout(() => {
        toast.classList.remove("show");
    }, 2500);
}

// H√†m ki·ªÉm tra v√† ƒë√°nh d·∫•u tr∆∞·ªùng b·ªã thi·∫øu
function validateForm(formData) {
    let isValid = true;

    document.querySelectorAll("input, select").forEach(input => {
        let value = formData[input.name]?.trim(); // Lo·∫°i b·ªè kho·∫£ng tr·∫Øng
        if (!value) {
            input.style.border = "2px solid red";
            isValid = false;
        } else {
            input.style.border = "1px solid #ccc";
        }
    });

    if (!isValid) {
        showToast("‚ö†Ô∏è Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!");
    }

    return isValid;
}

// Ki·ªÉm tra s·ªë ƒë∆°n h√†ng c√≥ tr√πng kh√¥ng
function isDuplicateOrder(orderNumber) {
    const storedData = JSON.parse(localStorage.getItem("orders")) || [];
    return storedData.some(order => order.so_don_hang === orderNumber);
}

// Khi nh·∫≠p s·ªë ƒë∆°n h√†ng, ki·ªÉm tra tr√πng l·∫∑p
document.addEventListener("input", (event) => {
    if (event.target.name === "so_don_hang") {
        let orderNumber = event.target.value.trim();
        if (isDuplicateOrder(orderNumber)) {
            event.target.style.border = "2px solid red";
            showToast("‚ö†Ô∏è S·ªë ƒë∆°n h√†ng ƒë√£ t·ªìn t·∫°i!");
        } else {
            event.target.style.border = "1px solid #ccc";
        }
    }
});

// H√†m t·∫£i d·ªØ li·ªáu t·ª´ localStorage v√† hi·ªÉn th·ªã trong b·∫£ng (m·ªõi nh·∫•t l√™n tr√™n)
function loadData() {
    const storedData = JSON.parse(localStorage.getItem("orders")) || [];
    const orderList = document.getElementById("order-list");
    orderList.innerHTML = ""; // X√≥a d·ªØ li·ªáu c≈© ƒë·ªÉ tr√°nh tr√πng l·∫∑p

    storedData.forEach(data => {
        addRowToTable(data, false);
    });
}

// H√†m th√™m h√†ng v√†o b·∫£ng
function addRowToTable(data, isNew = true) {
    const orderList = document.getElementById("order-list");
    const row = document.createElement("tr");

    for (const key in data) {
        const cell = document.createElement("td");
        cell.textContent = data[key];
        row.appendChild(cell);
    }

    if (isNew) {
        orderList.prepend(row);
    } else {
        orderList.appendChild(row);
    }
}

// H√†m g·ª≠i ƒë∆°n h√†ng v√† x·ª≠ l√Ω nh·∫≠p li·ªáu
async function submitForm(event) {
    event.preventDefault();
    const form = new FormData(event.target);
    const data = Object.fromEntries(form.entries());

    // Ki·ªÉm tra s·ªë ƒë∆°n h√†ng c√≥ b·ªã tr√πng kh√¥ng
    if (isDuplicateOrder(data.so_don_hang)) {
        showToast("‚ö†Ô∏è S·ªë ƒë∆°n h√†ng ƒë√£ t·ªìn t·∫°i!");
        return;
    }

    // Th√™m ƒë∆°n h√†ng m·ªõi v√†o **ƒë·∫ßu danh s√°ch**
    const storedData = JSON.parse(localStorage.getItem("orders")) || [];
    storedData.unshift(data);
    localStorage.setItem("orders", JSON.stringify(storedData));

    // C·∫≠p nh·∫≠t b·∫£ng ngay l·∫≠p t·ª©c m√† kh√¥ng c·∫ßn t·∫£i l·∫°i trang
    addRowToTable(data, true);
    event.target.reset();

    // Hi·ªÉn th·ªã th√¥ng b√°o ch·ªù khi g·ª≠i d·ªØ li·ªáu
    const submitButton = document.querySelector(".btn-submit");
    submitButton.textContent = "‚è≥ ƒêang g·ª≠i...";
    submitButton.disabled = true;

    try {
        await fetch("https://script.google.com/macros/s/AKfycbwBQRWx7-9P3Ssoo1Qu3fbcLoOz_86xOoyZczBlo06AzZL7vibxSwGkMtl3ObZoJplEHw/exec", {
            method: "POST",
            mode: "no-cors",
            body: JSON.stringify(data),
            headers: { "Content-Type": "application/json" }
        });

        setTimeout(() => {
            showToast("‚úÖ ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c g·ª≠i!");
            submitButton.textContent = "Th√™m ƒê∆°n H√†ng";
            submitButton.disabled = false;
        }, 1500);
    } catch (error) {
        showToast("‚ùå L·ªói khi g·ª≠i ƒë∆°n h√†ng!");
        console.error(error);
        submitButton.textContent = "Th√™m ƒê∆°n H√†ng";
        submitButton.disabled = false;
    }
function addCurrentTime() {
            const rows = document.querySelectorAll('#order-list tr');
            rows.forEach(row => {
                const timeCell = document.createElement('td');
                const now = new Date().toLocaleString();
                timeCell.textContent = now;
                row.appendChild(timeCell);
            });
        }
        window.onload = addCurrentTime;
}

// T·∫£i d·ªØ li·ªáu t·ª´ localStorage khi trang ƒë∆∞·ª£c t·∫£i l·∫°i
window.onload = loadData;

</script>
</body>
</html>
